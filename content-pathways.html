
<!doctype html>
<head>
<title>Pathways Hotstepping</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" id="pathways-css" href="pathways.css?v=2102181500" type="text/css" media="all">
<link rel="stylesheet" id="pathways-modal-css" href="style/micromodal.css?v=21024" type="text/css" media="all">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
</head>
<body>
<div>
  <p style="display:none;">
    Years: <span id="txt-years">?</span>
    ----Sets: <span id="txt-sets">?</span>
    ----Classes: <span id="txt-classes">?</span>
  </p>
</div>
<div id="pw-wrap" class="wrapper init">
  <div class="column-legend">
    <div class="title-logo"><span>ECP</span></div>
    <div class="title-text">
      ECP Pathways Through English
    </div>    
  </div>
  <div class="column y1">
    <div class="title-year">
      <span class="year">Year 1</span>
      <a class="hotspot" data-micromodal-trigger="modal-1" href='javascript:;'>a</a>
    </div>
    <div class="btn y1 s1" onclick="btnPathways(1,1)"><span>Set 1</span></div>
    <div class="btn y1 s2" onclick="btnPathways(1,2)"><span>Set 2</span></div>
    <div class="btn y1 s3" onclick="btnPathways(1,3)"><span>Set 3</span></div>
    <div class="btn y1 s4" onclick="btnPathways(1,4)"><span>Set 4</span></div>    
  </div>
  <div class="column-line-wrap init y2">
    <svg>
      <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
      <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
   </svg>
  </div>
  <div class="column y2">
    <div class="title-year">
      <span class="year">Year 2</span>
      <a class="hotspot" data-micromodal-trigger="modal-2" href='javascript:;'>b</a>
    </div>
    <div class="btn y2 s1" onclick="btnPathways(2,1)"><span>Set 1</span></div>
    <div class="btn y2 s2" onclick="btnPathways(2,2)"><span>Set 2</span></div>
    <div class="btn y2 s3" onclick="btnPathways(2,3)"><span>Set 3</span></div>
    <div class="btn y2 s4" onclick="btnPathways(2,4)"><span>Set 4</span></div>
  </div>
  <div class="column-line-wrap init y3">
    <svg>
      <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
      <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
   </svg>
  </div>
  <div class="column y3">
    <div class="title-year">
      <span class="year">Year 3</span>
      <a class="hotspot" data-micromodal-trigger="modal-3" href='javascript:;'>c</a>
    </div>
    <div class="btn y3 s1" onclick="btnPathways(3,1)"><span>Set 1</span></div>
    <div class="btn y3 s2" onclick="btnPathways(3,2)"><span>Set 2</span></div>
    <div class="btn y3 s3" onclick="btnPathways(3,3)"><span>Set 3</span></div>
    <div class="btn y3 s4" onclick="btnPathways(3,4)"><span>Set 4</span></div>
  </div>
  <div class="column-line-wrap init y4">
    <svg>
      <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
      <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
   </svg>
  </div>
  <div class="column y4">
    <div class="title-year">
      <span class="year">Year 4</span>
      <a class="hotspot" data-micromodal-trigger="modal-4" href='javascript:;'>d</a>
    </div>
    <div class="btn y4 s1" onclick="btnPathways(4,1)"><span>Set 1</span></div>
    <div class="btn y4 s2" onclick="btnPathways(4,2)"><span>Set 2</span></div>
    <div class="btn y4 s3" onclick="btnPathways(4,3)"><span>Set 3</span></div>
    <div class="btn y4 s4" onclick="btnPathways(4,4)"><span>Set 4</span></div>
  </div>
  <div class="column-line-wrap init y5">
    <svg>
      <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
      <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
   </svg>
  </div>
  <div class="column exams">
    <div class="title-year">&nbsp;</div>
    <div class="btn e1"><span>IGCSE</span></div>
    <div class="btn e2"><span>IGCSE<br>or CAE</span></div>
    <div class="btn e3"><span>CAE</span></div>
    <div class="btn e4"><span>CAE<br>or FCE</span></div>
  </div>
  <div class="column-line-wrap spacer">
    <svg>
      <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
      <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
   </svg>
  </div>
  <div class="column ib choose">
    <div class="title-year"><span class="ib-disc">IB</span></div>
    <div class="ib a">
      <span class="accent-4">IB English A</span>
      <span>Language and literature</span>
      <span class="accent-3">HL and SL</span>
    </div>
    <div class="ib x lines">
      <div class="column-line-wrap from-base-to-top y6">
        <svg>
          <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
          <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
       </svg>
      </div>
    </div>
    <div class="ib b">
      <span class="accent-2">IB English B</span>
      <span><span class="accent-3">HL</span> only</span>
    </div>    
  </div>
  <div class="column-line-wrap spacer">
    <svg>
      <line class="line-up" x1='0' y1='100%' x2='100%' y2='0' />
      <line class="line-down" x1='0' y1='0' x2='100%' y2='100%' />
   </svg>
  </div>
  <div class="column ib text">
    <div class="title-year"><span>Study after ECP</span></div>
    <div class="ib x">
      <div id="EnglishA">
        <p>English A is recommended for some UK university courses focused on written communication.</p>
        <p>Canadian and Hong Kong universities currently require English A.</p>
      </div>
      <div id="EnglishB">
        <p>Taking English B may require an additional HL subject for some UK university courses.</p>
      </div>
      <div id="EnglishBoth">
        <p>Both English A and English B courses lead to study at Czech, UK and other international universities.</p>
      </div>
      </div>
    </div>   
  </div>
</div>

<!-- [a] -->
<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
      <header class="modal__header">
        <h2 class="modal__title">
          a) Entrance, Setting & Courses
        </h2>
        <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
      </header>
      <div class="modal-content-content">
        <div class="modal__content">
          <ul>
            <li>Before joining ECP, students sit an English placement test and are set according to their current level of English.</li>
            <li>All pathways for students starting in year 1, lead to the possibility of studying English A at IB. Each set studies literacy and language skills, literature and textual analysis as well as language input (grammar and vocabulary) appropriate to their level of English.</li>
          </ul>
        </div>
        <footer class="modal__footer">
          <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
        </footer>
      </div>
    </div>
  </div>
</div>
<!-- [b] -->
<div class="modal micromodal-slide" id="modal-2" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
      <header class="modal__header">
        <h2 class="modal__title">
          b) Changing classes
        </h2>
        <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
      </header>
      <div class="modal-content-content">
        <div class="modal__content">
          <ul>
            <li>Students can be moved to a different set at any time in the school year after the class teacher, in consultation with colleagues, has fully assessed their ability across all language skills and has evaluated their learning needs.</li>
          </ul>
        </div>
        <footer class="modal__footer">
          <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
        </footer>
      </div>
    </div>
  </div>
</div>
<!-- [c] -->
<div class="modal micromodal-slide" id="modal-3" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
      <header class="modal__header">
        <h2 class="modal__title">
          c) Y4 External Exams
        </h2>
        <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
      </header>
      <div class="modal-content-content">
        <div class="modal__content">
          <ul>
            <li>In Year 4 all students have the opportunity to sit external English exams.</li>
            <li>4-1 sit IGCSE English First Language.</li>
            <li>4-2 sit either IGCSE or CAE (Cambridge Advanced English)</li>
            <li>4-3 sit CAE</li>
            <li>4-4 sit either CAE or FCE</li>
          </ul>
          <p>IGCSE is the international equivalent of the English 1st language exam that school students take in England and Wales at the age of 16. Cambridge CAE tests students to C1 and C2 levels on the Common European Framework for Languages (CEFR).
          <br>An A grade at FCE is equivalent to a pass at CAE.</p>
        </div>
        <footer class="modal__footer">
          <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
        </footer>
      </div>
    </div>
  </div>
</div>
<!-- [d] -->
<div class="modal micromodal-slide" id="modal-4" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
      <header class="modal__header">
        <h2 class="modal__title">
          d) Entry to IB
        </h2>
        <button class="modal__close" aria-label="Close modal" data-micromodal-close></button>
      </header>
      <div class="modal-content-content">
        <div class="modal__content">
          <ul>
            <li>IB English A courses are English first language and focus on textual analysis.</li>
            <li>IB English B is a second language course and focuses on developing language knowledge and skills.</li>
            <li>Students can not take IB English B after sitting IGCSE English 1st Language. They must continue to IB English A.</li>
            <li>Students usually need C1 level (FCE grade A or CAE pass) to continue to English A.</li>
            <li>For students who are planning to study a technical subject at university, IB English B may be an appropriate option for IB.</li>
          </ul>
        </div>
        <footer class="modal__footer">
          <button class="modal__btn" data-micromodal-close aria-label="Close this dialog window">Close</button>
        </footer>
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
  var arrYears = [];
  var arrSets = [];
  var styleWrapperInit = 'wrapper init';
  var styleWrapper = '';

  function updateStatusString(arrYears,arrSets){
    document.getElementById("txt-years").innerHTML = JSON.stringify(arrYears) + ' (' + arrYears.length + ')';
    document.getElementById("txt-sets").innerHTML = JSON.stringify(arrSets) + ' (' + arrSets.length + ')';
    document.getElementById("txt-classes").innerHTML = JSON.stringify(arrYears) + ' (' + arrYears.length + ')';


    // if(!styleWrapper){
      styleWrapper = "wrapper y" + arrYears.length + " s" + arrSets[arrSets.length - 1];
    // }else{
    //   styleWrapper += " y" + arrYears.length + " s" + arrSets[arrSets.length - 1];
    // }
    $("#pw-wrap").attr('class', styleWrapper);
    for (i = 0; i < arrYears.length; i++) {
      var tmpClass = "y" + arrYears[i] + "_s" + arrSets[i];
      $("#pw-wrap").addClass(tmpClass);
    }
    

    if(arrYears.length>1){
      var yDiff = 0;
      var lineUpOrDown = '';
      if(arrSets[arrSets.length - 1] >= arrSets[arrSets.length - 2]){
        yDiff = arrSets[arrSets.length - 1] - arrSets[arrSets.length - 2];
        lineUpOrDown = 'down v-' + yDiff;
      }else{
        yDiff = arrSets[arrSets.length - 2] - arrSets[arrSets.length - 1];
        lineUpOrDown = 'up v-' + yDiff;
      }
      var lineDiv = "column-line-wrap y" + arrYears.length;
      console.log("lineDiv: " + lineDiv);
      $(".column-line-wrap.y" + arrYears.length).attr('class', lineDiv + ' xxx ' + lineUpOrDown + ' from-S' + arrSets[arrSets.length - 2]);
    }
    
  }

  function updateSet(getYear, getSet){
    arrSets[getYear-1] = getSet;
    console.log('SET ' + getSet);
    // $(".column.y1").attr('class', "column y1");
    // $(".column.y2").attr('class', "column y2");
    // $(".column.y3").attr('class', "column y3");
    // $(".column.y4").attr('class', "column y4");

    for (i = 0; i < 5; i++) {
      if(i > getYear){
        $(".column.y" + i).attr('class', "column y" + i);
        $(".column-line-wrap.y" + i).attr('class', "column-line-wrap init y" + i);
      }
    }
    // $.each(arrYears, function(index, value){
    //   console.log(`RESET COLUMNS ${index}: ${value}`);
    //   if(value >= getYear){
    //     console.log(`YES ${index}: ${value}`);
    //     $(".column.y" + index + 1).attr('class', "column y" + value);
    //   }
    // });
    $(".column.y" + getYear).attr('class', "column y" + getYear + " s" + getSet);
    updateStatusString(arrYears,arrSets);
    // $(".column .y" + getYear).attr('class', "column y" + getYear + " s" + getSet);
  }

  function btnPathways(getYear, getSet){
    console.log('--------------------');
    console.log('Year and Set = ' + getYear + ', ' + getSet);

    var isClickable = $(".btn.y" + getYear + ".s" + getSet + " span").css('cursor') != 'not-allowed' ? true : false;
    // isClickable = (arrSets.length <=1 || (arrSets.length >=2 && (arrSets[arrSets.length - 2] == 1 && getSet < 4) || (arrSets[arrSets.length - 2] == 4 && getSet > 1))) ? true : false;
    if(!isClickable) return;

    if(!arrYears.length && getYear == 1){
      arrYears.push(getYear);
      arrSets.push(getSet);
      updateSet(getYear,getSet);
      console.log('YR | START | Year ' + getYear + ', ' + getSet);
    }else if(arrYears.length == getYear){
      // arrYears.push(getYear);
      console.log('YR | NO CHANGE | Year ' + getYear + ', ' + getSet);
      updateSet(getYear,getSet);
      // console.log('> SET Year ' + getYear);
    }else if(arrYears.length == getYear - 1){
      arrYears.push(getYear);
      arrSets.push(getSet);
      updateSet(getYear,getSet);
      console.log('> YR | SET | Year ' + getYear + ', ' + getSet);
    }else if(getYear < arrYears.length + 1){
      arrYears.splice(getYear, arrYears.length - (getYear) );
      arrSets.splice(getYear, arrSets.length - (getYear) );
      updateSet(getYear,getSet);
      console.log('< YR | GO BACK | Year ' + getYear + ', ' + getSet);
    }
    // updateSet(getYear,getSet);
    // updateStatusString(arrYears,arrSets);
    console.log('OPACITY: ' + $(".btn.y2.s4").css('opacity'));
  }

  //REF:
  /*
  https://stackoverflow.com/questions/26568536/remove-all-items-after-an-index/26568611
  https://www.quackit.com/html/templates/css_flexbox_templates.cfm
  */

  document.addEventListener("DOMContentLoaded", function() {
  
  try {
    
    MicroModal.init({
      awaitCloseAnimation: true,// set to false, to remove close animation
      onShow: function(modal) {
        console.log("micromodal open");
      },
      onClose: function(modal) {
        console.log("micromodal close");
      }
    });
    
  } catch (e) {
    console.log("micromodal error: ", e);
  }
  
});

</script>

</body>
</html>